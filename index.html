<!DOCTYPE html>
<html lang="en"> 

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap" rel="stylesheet">
  <title>Life Test</title>
  <link rel="stylesheet" href="Quiz.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


  <script>
    if (window.top !== window.self) {
      window.top.location = window.self.location.href;}
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <!-- Google tag -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-W0BT0S586R"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-W0BT0S586R');
  </script>
</head>
  
<body>
  <div class="phone-container">  
    
    <!-- HOME PAGE -->
    <div id="home" class="flex-center flex-column">
      <h1>Lai Liao, Life Test!</h1>
      <h2></h2>
      <h2>
        Steady boh? Find out if youâ€™re ready to adult, or still need your mum to help top up your EZ-Link.
      </h2>

      <div class="begin-quiz-container">
        <!-- Merger: intro html -->
        <button id="begin-intro" style="margin-top: 24px">Challenge Accepted</button>
      </div>
    </div>

    <!--INTRODUCTION PAGE  -->
    <div class="intro-page" id="intro-page" style="display: none;"> 
      <div id="intro" class="justify-center flex-column"> 
        <h1>Take a deep breath.</h1>
        <h2>Imagine this. You're walking through your everyday life in Singapore.</h2>
        <h2>
          The smell of kopi in the air, the chatter of the hawker centre, the hum of buses and dreams. Along the way, you'll face familiar moments, little choices, big feelings, and reflections about what truly matters. So breathe.
        </h2> 
        <h2>
          <br>Answer with your gut. Ready to find out what kind of "life traveller" you are? Tap Start, and let's begin your story.
        </h2> 
        <p> 
          <!-- <img src="./images/introduction.png" class="cover-image" alt="Cover Image"> -->
          <!-- <img src="./images/s0.png" class="cover-image" alt="Cover Image"> -->
        </p> 
        <div class="begin-quiz-container"> 
          <button id="begin-quiz" style="margin-top: 24px">Start</button> 
        </div> 
      </div>   
    </div>
    
    <!-- QUIZ PAGE  -->
    <div class="quiz-page" id="quiz-page" style="display: none;">
      <div id="quiz" class="justify-center flex-column">
        <!-- Quiz progress -->
          <!-- <img id="question-progress-image" src="" > -->
          <div id="progress-container">
            <div id="progress-bar"></div>
            <!--<div id="progress-text">0%</div>-->
          </div>

        <!-- Quiz image,qn, choice-->
        <img id="question-image" src="">
        <h2 id="question" style="margin-bottom: 8px">Loading question...</h2>
        <div id="choices" class="choices">  
          
        </div>

      </div>
    </div>
    <div id="tip-box" style="display:none;" class="tip-box"></div>

    <!-- CONTACT FORM PAGE -->
    <div id="contact-page" style = "display:none; overflow-y:auto; max-height:100vh; scrollbar-width:none; -ms-overflow-style:none; padding: 0px 15px;">
      <!-- Header image -->
      <div style="text-align: center; margin-bottom: 15px;">
        <img src="./images/contactpg.png" style="width: 100%; max-width: 700px; height: auto; object-fit: fill;">
      </div>

      <form id="insurance-form" action="https://script.google.com/macros/s/AKfycbzCxd_mZfg7Xzqj01RBaz5IpVFx9F_lNn0CP1ZyymDqNcZgBIcaAmchiTFGHIyytFBz/exec" method="POST" 
        style="display:flex; flex-direction:column; gap:15px; max-width:100%; margin:0;">
        <input type="hidden" name="resultType" id="resultType">
        
        <input type="text" id="user-name" name="name"
          placeholder="What should we call you?" required 
          style="padding: 12px; 
            border: 2px solid #ffd989; border-radius: 25px; 
            font-family: 'Gloria Hallelujah', cursive; font-size: 14px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;">
        
        <input type="email" id="user-email"
          placeholder="What's your email?" required
          pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
          title="Please enter a valid email address"
          style="padding: 12px;
            border: 2px solid #ffd989; border-radius: 25px;
            font-family: 'Gloria Hallelujah', cursive; font-size: 14px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;">
        
        <!-- EDIT -->
        <div class="contact-wrapper">
          <!-- Icon Selector -->
          <div class="icon-selector" id="selected-icon">ðŸ“ž+65</div>
          <div class="icon-options" id="icon-options">
            <span data-type="call">ðŸ“ž+65</span>
            <span data-type="telegram"><i class="fa-brands fa-telegram"></i> @</span>
            <span data-type="linkedin"><i class="fa-brands fa-linkedin"></i> ðŸ”—</span>
          </div>

          <!-- Input -->
          <input type="tel" id="user-phone"
            placeholder="What's your phone number?"
            pattern="[89][0-9]{7}"
            maxlength="8"
            inputmode="numeric"
            oninput="this.value = this.value.replace(/[^0-9]/g, '')">
        </div>

        <script>
          const selectedIcon = document.getElementById("selected-icon");
          const iconOptions = document.getElementById("icon-options");
          const inputField = document.getElementById("user-phone");

          let currentType = "call"; // default

          // Toggle dropdown
          selectedIcon.addEventListener("click", () => {
            iconOptions.style.display = iconOptions.style.display === "flex" ? "none" : "flex";
          });

          // Handle selection
          iconOptions.addEventListener("click", (e) => {
            const option = e.target.closest("span"); // ensure we catch <i> clicks too
            if (option && option.dataset.type) {
              currentType = option.dataset.type;
              selectedIcon.innerHTML = option.innerHTML; // preserve icons
              iconOptions.style.display = "none";

              if (currentType === "telegram") {
                inputField.type = "text";
                inputField.placeholder = "What's your Telegram @?";
                inputField.setAttribute("pattern", "^@[A-Za-z0-9_]{3,}$"); 
                inputField.removeAttribute("maxlength");
                inputField.oninput = null;
              } else if (currentType === "linkedin") {
                inputField.type = "text"; // use text instead of url
                inputField.placeholder = "Paste your LinkedIn profile link";
                inputField.setAttribute("pattern", "^(https:\\/\\/)?(www\\.)?linkedin\\.com\\/in\\/[A-Za-z0-9_-]+\\/?$");
                inputField.removeAttribute("maxlength");
                inputField.oninput = null;
              } else {
                inputField.type = "tel";
                inputField.placeholder = "What's your phone number?";
                inputField.setAttribute("pattern", "[89][0-9]{7}");
                inputField.setAttribute("maxlength", "8");
                inputField.oninput = function() {
                  this.value = this.value.replace(/[^0-9]/g, '');
                };
              }
            }
          });
          // Validation on blur, so that it auto checks whether its valid without submission
          inputField.addEventListener("blur", () => {
            let isValid = true;
            if (currentType === "telegram") {
              const regex = /^@[A-Za-z0-9_]{3,}$/;
              if (!regex.test(inputField.value.trim())) {
                inputField.setCustomValidity("Telegram handle must start with @ and have at least 3 characters.");
                isValid = false;
              } else {
                inputField.setCustomValidity("");
              }
            } else if (currentType === "linkedin") {
              const regex = /^(https:\/\/)?(www\.)?linkedin\.com\/in\/[A-Za-z0-9_-]+\/?$/;
              if (!regex.test(inputField.value.trim())) {
                inputField.setCustomValidity("Please enter a valid LinkedIn profile link (e.g. www.linkedin.com/in/your-name).");
                isValid = false;
              } else {
                inputField.setCustomValidity("");
              }
            } else {
              // phone/whatsapp validation (browser will handle pattern)
              if (!inputField.checkValidity()) {
                inputField.setCustomValidity("Please enter a valid 8-digit Singapore number starting with 8 or 9.");
                isValid = false;
              } else {
                inputField.setCustomValidity("");
              }
            }

            // Apply or remove red border
            if (!isValid) {
              inputField.classList.add("invalid");
            } else {
              inputField.classList.remove("invalid");
            }
          });
          // Remove red instantly on typing
          inputField.addEventListener("input", () => {
            inputField.classList.remove("invalid");
            inputField.setCustomValidity("");
          });

        </script>

        <!-- END OF EDIT -->

        <select id="pet-type" name="petType" required
          style=" padding: 12px;
            border: 2px solid #ffd989; border-radius: 25px;
            font-family: 'Gloria Hallelujah', cursive; font-size: 14px;
            text-align: center; 
            background-color: white;
            width: 100%; 
            box-sizing: border-box;"> 
          <option value ="" disabled selected hidden> What's your interest? </option>
          <option value="Literacy">I want to gain more financial literacy</option>
          <option value="Insurance">I want to get insurance advice</option>
          <option value="Wealth">I want to learn more about investment strategies</option>
          <option value="Enquiry">I have other financial concerns I would like to consult</option>
        </select>
        
        <button type="submit" id="submit-contact"
          style="padding: 12px;
            background-color: #ffd989;
            border: 2px solid #ffd989; border-radius: 25px;
            font-family: 'Gloria Hallelujah', cursive; font-size: 14px; font-weight: 600;
            color: #3b2921;
            cursor: pointer;
            width: 100%;
            box-sizing: border-box;">Unlock My Steps âœ¨</button>
      </form>
      
      <p style="text-align: center; font-family: 'Gloria Hallelujah', cursive; color: #7f8c8d; font-size: 12px; margin: 15px 0;">
        We'll reach out to schedule a short, no-pressure chat.
      </p>

      <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-bottom: 20px;">
        <div style="display: flex; align-items: center; gap: 6px; font-family: 'Gloria Hallelujah', cursive; font-size: 12px; color: #5a6c7d;">
          <div style="width: 16px; height: 16px; background: #7f8c8d; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px;">ðŸ”’</div>
          <span>Your info stays private.</span>
        </div>
        <div style="display: flex; align-items: center; gap: 6px; font-family: 'Gloria Hallelujah', cursive; font-size: 12px; color: #5a6c7d;">
          <div style="width: 16px; height: 16px; background: #27ae60; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px;">âœ“</div>
          <span>No spam, No Obligation.</span>
        </div>
      </div>

      <div id="form-message" style="margin-top: 15px; font-size: 14px"></div>
      
      <!-- Skip Option -->
      <div style="text-align: center; margin-top: 25px">
        <span id="skip-to-results"
          style="font-family: 'Gloria Hallelujah', cursive; font-size: 14px;
            color: #666;
            cursor: pointer;
            text-decoration: underline; "
          onclick="calculateAndDisplayResult()">Skip â†’ See My Results</span>
      </div>
    </div>

    <!-- RESULT PAGE -->
    <div id="result-page" style="display: none;
        overflow-y: auto;
        max-height: 100vh;
        scrollbar-width: none; -ms-overflow-style: none;">
      <h1>Your Result!</h1>
      <h2>Press & hold to save your<br>result image!</h2>
      <div id="result-content">
        <div id="result-image"> </div>  
        <h2 id="result-type"></h2>
        <div id="result-description"></div>
      </div> 

      <div class="begin-quiz-container" style="margin-top: 30px">
        <button class="share-button">âœ‰ï¸Žá¯“âž¤ Share Your Result!</button>
        <button id="back-to-home" 
          onclick="window.location.href='index.html'">â†º Try Again</button>
        <button id="contact-page-btn"
          onclick="showContactPage()">âœ† Sign Up Now!</button>
      </div>

      <p style="text-align: center; font-family: 'Gloria Hallelujah', cursive; color: #7f8c8d; font-size: 12px; margin: 15px 0;">
        We share bite-sized educational tips every weekâ€”follow us on Instagram! @Ought_toknow
      </p>
    </div>

  </div>

  <!-- Load script.js on the quiz page -->
   <script>
    // Auto-start the quiz when the page loads
    document.addEventListener("DOMContentLoaded", function () {
      console.log("Quiz page loaded, starting quiz...");  // Start displaying the first question immediately
    });
   </script>
  <script src="script.js"></script>
  <script>
  document.getElementById("insurance-form").addEventListener("submit", function(e) {
    // Ensure resultType is filled (if quiz logic didnâ€™t set it yet)
    if (!document.getElementById("resultType").value) {
      document.getElementById("resultType").value = 
        document.getElementById("result-type").innerText || "Not Calculated";
    }

    // Debug log to check values before submit
    console.log("Submitting form with:", {
      name: document.getElementById("user-name").value,
      email: document.getElementById("user-email").value,
      phone: document.getElementById("user-phone").value,
      petType: document.getElementById("pet-type").value,
      resultType: document.getElementById("resultType").value
    });
  });
</script>

</body>
  
</html>





